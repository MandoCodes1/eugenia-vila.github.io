---
import Layout from '~/layouts/PageLayout.astro';
import Hero from '~/components/widgets/Hero.astro';
import Features from '~/components/widgets/Features.astro';
import Testimonials from '~/components/widgets/Testimonials.astro';
import Stats from '~/components/widgets/Stats.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import { getFeaturedReviews } from '~/utils/reviews';
import wideRoom from '~/assets/images/wide_treatment_room.jpg';

const metadata = {
  title: 'Dr. Eugenia Vila - Dental Clinic in Málaga',
  description: 'Dental clinic in El Palo, Málaga. Over 30 years of experience in dental implants, oral surgery, aligners and cosmetic dentistry. Awarded Dentist of the Year by Dental Art Implant Clinics (London, UK).',
  ignoreTitleTemplate: true,
};

const featuredReviews = getFeaturedReviews(6);
const testimonials = featuredReviews.map(review => ({
  testimonial: review.text_en,
  name: review.name,
  job: review.clinic === 'malaga' ? 'Málaga' : review.clinic === 'balham' ? 'London (Balham)' : 'London (Finchley)',
  image: {
    src: review.avatar.startsWith('http') ? review.avatar : undefined,
    alt: review.name,
  },
  rating: review.rating,
  date: review.date,
  source: review.source,
  link: review.link,
}));
---

<Layout metadata={metadata}>
  <!-- Hero Section -->
  <Hero
    actions={[
      {
        variant: 'primary',
        text: 'Book via WhatsApp',
        href: 'https://wa.me/34679975580?text=Hello,%20I%20would%20like%20to%20book%20an%20appointment',
        target: '_blank',
        icon: 'tabler:brand-whatsapp',
      },
      {
        text: 'View Location',
        href: 'https://www.google.com/maps/place/Clinica+Dental+Dra.+Eugenia+Vila/@36.7212568,-4.3611691,16z/data=!3m1!4b1!4m6!3m5!1s0xd7259d6897597c3:0x48544afb3aaf06a4!8m2!3d36.7212568!4d-4.3611691!16s%2Fg%2F11xnngghh?entry=tts&g_ep=EgoyMDI1MTEwNC4xIPu8ASoASAFQAw%3D%3D&skid=c1c51f43-632e-4bfc-bcb0-bea57f7b8390',
        target: '_blank',
        icon: 'tabler:map-pin',
      },
    ]}
    image={{ src: wideRoom, alt: 'Dr. Eugenia Vila treatment room' }}
  >
    <Fragment slot="title">
      <span class="text-accent dark:text-white">Perfect Smiles</span> with Over
      <span class="text-accent dark:text-white">30 Years of Experience</span>
    </Fragment>

    <Fragment slot="subtitle">
      <span class="block mb-2">
        <span class="font-bold">Doctor of Medicine and Dentistry</span>, <span class="font-bold">Master's in Dental Implants and Aesthetics</span>
      </span>
      <span class="block mb-2">
        Awarded <span class="font-bold">Dentist of the year 2024</span>, Dental Art Implant Clinics
      </span>
      <span class="block">
        Dental Clinic in El Palo, Málaga.
      </span>
    </Fragment>
  </Hero>

  <!-- Services Preview -->
  <Features
    id="services"
    tagline="Our Services"
    title="Specialized Dental Treatments"
    subtitle="With cutting-edge technology and the highest quality materials"
    items={[
      {
        title: 'Dental Implants',
        description:
          'Full-mouth rehabilitation with implants. Specialist in implant placement, bone grafting and sinus lift procedures.',
        icon: 'tabler:dental',
      },
      {
        title: 'Oral Surgery',
        description:
          'Complex extractions, wisdom teeth removal and advanced surgical procedures. Specialized care with over 30 years of experience.',
        icon: 'tabler:medical-cross',
      },
      {
        title: 'Aligners',
        description:
          'Clear aligner treatment for smile correction without traditional braces. Predictable and comfortable results.',
        icon: 'tabler:dental-off',
      },
      {
        title: 'Cosmetic Dentistry',
        description:
          'Porcelain veneers, bonding and personalized smile design. Natural and beautiful results that transform your smile.',
        icon: 'tabler:sparkles',
      },
    ]}
  >
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-white dark:bg-slate-900"></div>
    </Fragment>
  </Features>

  <!-- Stats Section -->
  <Stats
    stats={[
      { title: 'Years of Experience', amount: '30+' },
      { title: 'Satisfied Patients', amount: '20K+' },
      { title: 'Implants Placed', amount: '3K+' },
      { title: '5-Star Reviews', amount: '60+' },
    ]}
  />

  <!-- Testimonials Section -->
  <Testimonials
    title="What Our Patients Say"
    subtitle="Over 60 five-star reviews on Google and Trustpilot"
    testimonials={testimonials}
    language="en"
    callToAction={{
      text: 'View All Reviews',
      href: '/en/reviews',
    }}
  />

  <!-- Call to Action -->
  <CallToAction
    actions={[
      {
        variant: 'primary',
        text: 'Book via WhatsApp',
        href: 'https://wa.me/34679975580?text=Hello,%20I%20would%20like%20to%20book%20an%20appointment',
        target: '_blank',
        icon: 'tabler:brand-whatsapp',
      },
    ]}
  >
    <Fragment slot="title">Ready for Your Best Smile?</Fragment>

    <Fragment slot="subtitle">
      Contact us via WhatsApp to book your consultation.<br />
      <span class="text-sm text-muted">
        Clinic open select weekends when Dr. Vila is in Málaga.
      </span>
    </Fragment>
  </CallToAction>
</Layout>

